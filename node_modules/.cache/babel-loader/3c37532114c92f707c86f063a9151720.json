{"ast":null,"code":"var _jsxFileName = \"/Users/parkminkyung/Desktop/git/HobbyGram-Front/src/pages/PostDetail.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport styled from \"styled-components\";\nimport { Grid, Input, Text, Image } from \"../element/Index\";\nimport moment from \"moment\";\nimport CommentButton from \"../components/CommentButton\";\nimport CommentPost from \"../components/CommentPost\";\nimport HeartButton from \"../components/HeartButton\";\nimport { actionCreators as commentActions } from \"../redux/modules/comment\";\nimport { actionCreators as postActions } from \"../redux/modules/post\";\nimport { history } from \"../redux/configureStore\";\nimport { RepeatRounded } from \"@material-ui/icons\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst PostDetail = props => {\n  _s();\n\n  const dispatch = useDispatch();\n  const [comment, setComment] = React.useState(\"\"); //포스트 id 추출\n\n  const post_id = props.match.params.id; // 유저정보 불러오기\n\n  const user = useSelector(state => state.user.user); // 유저정보가 변할때(로그인유저바뀔때) 내가쓴게시글인지 내가쓴 댓글인지 확인 후 렌더링(수정,삭제 버튼 표시유무/ 좋아요 눌렀는지 표시)\n\n  React.useEffect(() => {\n    dispatch(postActions.getOnePostDB(post_id));\n    dispatch(commentActions.getCommentDB(post_id));\n  }, [user]); // 게시글 정보 불러오기\n\n  const post = useSelector(state => state.post.post); // 댓글 불러오기\n\n  const comment_list = useSelector(state => state.comment.list); // 댓글없으면 그냥 없는대로 렌더링(오류방지)\n\n  if (!comment_list) {\n    return null;\n  } //게시글 삭제함수\n\n\n  const deletePost = () => {\n    if (window.confirm(\"정말 삭제하시겠습니까?\")) {\n      dispatch(postActions.deletePostDB(post_id));\n      window.alert(\"삭제되었습니다!\");\n      history.replace(\"/\");\n    } else {\n      return;\n    }\n  }; // 좋아요 실행함수\n\n\n  const changeLike = e => {\n    // 이벤트 버블링,캡쳐링 방지\n    e.preventDefault();\n    e.stopPropagation(); // 로그인 없이 좋아요 기능 눌렀을때 알림과함께 로그인화면으로 보내기\n\n    if (!user) {\n      window.alert(\"로그인이 필요합니다.\");\n      history.push(\"/login\");\n      return;\n    } // 좋아요 현재 상태값 갖고 좋아요 함수 실행\n\n\n    const is_like = props.is_like;\n    dispatch(postActions.toggleLikeDB(post_id, is_like));\n  }; // 댓글작성 실행함수\n\n\n  const addComment = () => {\n    // 로그인 없이 댓글 작성시 알림창 생성\n    if (!user) {\n      window.alert(\"로그인이 필요합니다.\");\n      return;\n    } // 댓글 입력내용없이 작성버튼누를시 내용입력하라는 알림창 생성\n\n\n    if (!comment) {\n      window.alert(\"댓글 내용을 입력해주세요.\");\n      return;\n    }\n\n    dispatch(commentActions.addCommentDB(user.name, comment, post_id));\n    window.alert(\"댓글을 게시하였습니다.\");\n  };\n\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Wrapper, {\n      children: [user.name === post.user ? /*#__PURE__*/_jsxDEV(Topbutton, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginRight: \"0.5rem\"\n          },\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            onClick: () => {\n              history.push(`/post/${post_id}/edit`);\n            },\n            children: \"\\uC218\\uC815\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            onClick: deletePost,\n            children: \"\\uC0AD\\uC81C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false) // 빈 값 <React.Fragment>랑 같은 것\n      , /*#__PURE__*/_jsxDEV(Grid, {\n        padding: \"0px\",\n        children: [/*#__PURE__*/_jsxDEV(Text, {\n          bold: true,\n          size: \"30px\",\n          children: post.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(InfoWrap, {\n          children: [/*#__PURE__*/_jsxDEV(InfoBox, {\n            children: [/*#__PURE__*/_jsxDEV(InfoText, {\n              children: moment(post.createdAt).format(\"YYYY-MM-DD\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                marginLeft: \"0.4rem\",\n                marginRight: \"0.4rem\"\n              },\n              children: \"\\xB7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(InfoText, {\n              children: post.user\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                marginLeft: \"0.4rem\",\n                marginRight: \"0.4rem\"\n              },\n              children: \"\\xB7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(InfoText, {\n              children: post.category\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 128,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(LikeCommentBox, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: \"flex\",\n                lineHeight: \"1.5\",\n                color: \"rgb(134, 142, 150)\",\n                width: \"100%\",\n                justifyContent: \"space-between\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(CommentButton, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 140,\n                columnNumber: 17\n              }, this), comment_list.length]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                width: \"2rem\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: \"flex\",\n                lineHeight: \"1.5\",\n                color: \"rgb(134, 142, 150)\",\n                width: \"100%\",\n                justifyContent: \"space-between\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(HeartButton, {\n                _onClick: changeLike\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 153,\n                columnNumber: 17\n              }, this), post.recommendCnt]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        children: /*#__PURE__*/_jsxDEV(Image, {\n          detail: true,\n          src: post.img\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        children: /*#__PURE__*/_jsxDEV(ContentBox, {\n          children: post.content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        margin: \"1rem 0px 0px 0px\",\n        children: /*#__PURE__*/_jsxDEV(CommentBox, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: \"flex\",\n              alignItems: \"center\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(Input, {\n              _onChange: e => {\n                setComment(e.target.value);\n              },\n              placeholder: \"\\uB313\\uAE00 \\uB0B4\\uC6A9\\uC744 \\uC785\\uB825\\uD558\\uC138\\uC694.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(CommentAddBtn, {\n              onClick: addComment,\n              children: \"\\uAC8C\\uC2DC\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CommentListBox, {\n            children: comment_list ? comment_list.map((p, idx) => {\n              return /*#__PURE__*/_jsxDEV(CommentPost, { ...p\n              }, p._id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 180,\n                columnNumber: 26\n              }, this);\n            }) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 92,\n    columnNumber: 5\n  }, this);\n};\n\n_s(PostDetail, \"XJTOpF70Hb0POFiZyi4EWUpbbrs=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useSelector];\n});\n\n_c = PostDetail;\nPostDetail.defaultProps = {\n  title: \"제목이 들어갈 자리입니다. 그래서 아무도 제목말고는 볼 수 없어요. 진짜에요.\",\n  user: \"작성자\",\n  createdAt: \"2000-00-00\",\n  category: \"카테고리\",\n  commentCnt: 0,\n  recommendCnt: 0,\n  img: \"https://cdn.crowdpic.net/list-thumb/thumb_l_1ED169F054035E14E5A306D7947BC544.jpg\",\n  content: \"내용이 들어가는 자리입니다.\",\n  comment_user: \"박민경\",\n  comment_content: \"이게 대체 뭔소리에요??\",\n  comment_createdAt: \"2021-04-13\",\n  is_like: false\n};\nconst CommentListBox = styled.div`\n  margin-top: 1.5rem;\n`;\n_c2 = CommentListBox;\nconst Button = styled.button`\n  width: auto;\n  height: 35px;\n  margin: 0px;\n  border: 0px solid;\n  background-color: #ccd6f1;\n  border-radius: 10px;\n  font-weight: 700;\n  font-size: 1rem;\n  box-shadow: rgb(0 0 0 / 30%) 0px 1.5px 2.5px 0px;\n`;\n_c3 = Button;\nconst CommentAddBtn = styled.button`\n  width: 4.5rem;\n  margin-left: 0.5rem;\n  padding: 0.75rem 4px;\n  align-items: center;\n  border: 0px solid;\n  background-color: #ccd6f1;\n  border-radius: 10px;\n  font-weight: 700;\n  font-size: 1rem;\n  box-shadow: rgb(0 0 0 / 30%) 0px 1.5px 2.5px 0px;\n  @media all and (max-width: 414px) {\n    height: 2.4rem;\n    font-size: 0.8rem;\n    width: 3rem;\n  }\n  @media all and (max-width: 375px) {\n    height: 2.4rem;\n    font-size: 0.8rem;\n    width: 3rem;\n  }\n`;\n_c4 = CommentAddBtn;\nconst Wrapper = styled.div`\n  width: 50rem;\n  height: 100%;\n  margin-left: auto;\n  margin-right: auto;\n  margin-top: 6rem;\n  margin-bottom: 10rem;\n  padding: 100px;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  background: white;\n  border-radius: 4px;\n  box-shadow: rgb(0 0 0 / 30%) 0px 4px 16px 0px;\n  border-radius: 10px;\n  @media all and (min-width: 1024px) {\n    width: 50%;\n  }\n  @media all and (max-width: 768px) {\n    width: 60%;\n  }\n  @media all and (max-width: 414px) {\n    margin-top: 1rem;\n    width: 80%;\n    padding: 1rem;\n  }\n  @media all and (max-width: 375px) {\n    width: 80%;\n    padding: 1rem;\n    margin-top: 1rem;\n  }\n`;\n_c5 = Wrapper;\nconst LikeCommentBox = styled.div`\n  border: none;\n  width: 6rem;\n  height: 100%;\n  background-color: white;\n  display: flex;\n  justify-content: space-between;\n`;\n_c6 = LikeCommentBox;\nconst ContentBox = styled.div`\n  overflow: scroll;\n  box-sizing: border-box;\n  border: 1px solid #dddddd;\n  width: 100%;\n  font-size: 1.3rem;\n  padding: 12px 4px;\n  height: 25rem;\n  padding: 2rem;\n  margin-top: 1rem;\n  @media all and (max-width: 1024px) {\n    height: 10rem;\n  }\n  @media all and (max-width: 414px) {\n    font-size: 0.7rem;\n  }\n  @media all and (max-width: 375px) {\n    font-size: 0.7rem;\n  }\n`;\n_c7 = ContentBox;\nconst CommentBox = styled.div`\n  box-sizing: border-box;\n  border: 1px solid #dddddd;\n  width: 100%;\n  font-size: 1.3rem;\n  padding: 12px 4px;\n  height: 100%;\n  background-color: #f5f8ff;\n  padding: 2rem;\n  @media all and (max-width: 414px) {\n    font-size: 0.8rem;\n    padding: 0.7rem;\n  }\n  @media all and (max-width: 375px) {\n    font-size: 0.8rem;\n    padding: 0.7rem;\n  }\n`;\n_c8 = CommentBox;\nconst InfoBox = styled.div`\n  font-size: 0.75rem;\n  line-height: 1.5;\n  color: rgb(134, 142, 150);\n`;\n_c9 = InfoBox;\nconst InfoText = styled.span`\n  font-size: 1rem;\n  line-height: 1.5;\n  color: rgb(134, 142, 150);\n  @media all and (max-width: 414px) {\n    font-size: 0.7rem;\n  }\n  @media all and (max-width: 375px) {\n    font-size: 0.7rem;\n  }\n`;\n_c10 = InfoText;\nconst InfoWrap = styled.div`\n  margin: 0.7rem 0px;\n  display: flex;\n  box-sizing: border-box;\n  justify-content: space-between;\n`;\n_c11 = InfoWrap;\nconst Topbutton = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  margin: 0px 0px 0px 0px;\n\n  @media all and (max-width: 414px) {\n    & > div > button {\n      font-size: 0.5rem;\n      height: 2rem;\n    }\n  }\n\n  @media all and (max-width: 375px) {\n    & > div > button {\n      font-size: 0.5rem;\n      height: 2rem;\n    }\n  }\n`;\n_c12 = Topbutton;\nexport default PostDetail;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10, _c11, _c12;\n\n$RefreshReg$(_c, \"PostDetail\");\n$RefreshReg$(_c2, \"CommentListBox\");\n$RefreshReg$(_c3, \"Button\");\n$RefreshReg$(_c4, \"CommentAddBtn\");\n$RefreshReg$(_c5, \"Wrapper\");\n$RefreshReg$(_c6, \"LikeCommentBox\");\n$RefreshReg$(_c7, \"ContentBox\");\n$RefreshReg$(_c8, \"CommentBox\");\n$RefreshReg$(_c9, \"InfoBox\");\n$RefreshReg$(_c10, \"InfoText\");\n$RefreshReg$(_c11, \"InfoWrap\");\n$RefreshReg$(_c12, \"Topbutton\");","map":{"version":3,"sources":["/Users/parkminkyung/Desktop/git/HobbyGram-Front/src/pages/PostDetail.js"],"names":["React","useDispatch","useSelector","styled","Grid","Input","Text","Image","moment","CommentButton","CommentPost","HeartButton","actionCreators","commentActions","postActions","history","RepeatRounded","PostDetail","props","dispatch","comment","setComment","useState","post_id","match","params","id","user","state","useEffect","getOnePostDB","getCommentDB","post","comment_list","list","deletePost","window","confirm","deletePostDB","alert","replace","changeLike","e","preventDefault","stopPropagation","push","is_like","toggleLikeDB","addComment","addCommentDB","name","marginRight","title","createdAt","format","marginLeft","category","display","lineHeight","color","width","justifyContent","length","recommendCnt","img","content","alignItems","target","value","map","p","idx","_id","defaultProps","commentCnt","comment_user","comment_content","comment_createdAt","CommentListBox","div","Button","button","CommentAddBtn","Wrapper","LikeCommentBox","ContentBox","CommentBox","InfoBox","InfoText","span","InfoWrap","Topbutton"],"mappings":"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A;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CArBA;MAAMC,a;AAuBN,MAAMC,OAAO,GAAGhF,MAAM,CAAC4E,GAAI;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CA/BA;MAAMI,O;AAiCN,MAAMC,cAAc,GAAGjF,MAAM,CAAC4E,GAAI;AAClC;AACA;AACA;AACA;AACA;AACA;AACA,CAPA;MAAMK,c;AASN,MAAMC,UAAU,GAAGlF,MAAM,CAAC4E,GAAI;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAnBA;MAAMM,U;AAqBN,MAAMC,UAAU,GAAGnF,MAAM,CAAC4E,GAAI;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAjBA;MAAMO,U;AAmBN,MAAMC,OAAO,GAAGpF,MAAM,CAAC4E,GAAI;AAC3B;AACA;AACA;AACA,CAJA;MAAMQ,O;AAMN,MAAMC,QAAQ,GAAGrF,MAAM,CAACsF,IAAK;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAVA;OAAMD,Q;AAYN,MAAME,QAAQ,GAAGvF,MAAM,CAAC4E,GAAI;AAC5B;AACA;AACA;AACA;AACA,CALA;OAAMW,Q;AAON,MAAMC,SAAS,GAAGxF,MAAM,CAAC4E,GAAI;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAlBA;OAAMY,S;AAoBN,eAAe1E,UAAf","sourcesContent":["import React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\n\nimport styled from \"styled-components\";\nimport { Grid, Input, Text, Image } from \"../element/Index\";\nimport moment from \"moment\";\n\nimport CommentButton from \"../components/CommentButton\";\nimport CommentPost from \"../components/CommentPost\";\nimport HeartButton from \"../components/HeartButton\";\n\nimport { actionCreators as commentActions } from \"../redux/modules/comment\";\nimport { actionCreators as postActions } from \"../redux/modules/post\";\n\nimport { history } from \"../redux/configureStore\";\nimport { RepeatRounded } from \"@material-ui/icons\";\n\nconst PostDetail = (props) => {\n  const dispatch = useDispatch();\n\n  const [comment, setComment] = React.useState(\"\");\n\n  //포스트 id 추출\n  const post_id = props.match.params.id;\n\n  // 유저정보 불러오기\n  const user = useSelector((state) => state.user.user);\n\n  // 유저정보가 변할때(로그인유저바뀔때) 내가쓴게시글인지 내가쓴 댓글인지 확인 후 렌더링(수정,삭제 버튼 표시유무/ 좋아요 눌렀는지 표시)\n  React.useEffect(() => {\n    dispatch(postActions.getOnePostDB(post_id));\n    dispatch(commentActions.getCommentDB(post_id));\n  }, [user]);\n\n  // 게시글 정보 불러오기\n  const post = useSelector((state) => state.post.post);\n\n  // 댓글 불러오기\n  const comment_list = useSelector((state) => state.comment.list);\n\n  // 댓글없으면 그냥 없는대로 렌더링(오류방지)\n  if (!comment_list) {\n    return null;\n  }\n\n  //게시글 삭제함수\n  const deletePost = () => {\n    if (window.confirm(\"정말 삭제하시겠습니까?\")) {\n      dispatch(postActions.deletePostDB(post_id));\n      window.alert(\"삭제되었습니다!\");\n      history.replace(\"/\");\n    } else {\n      return;\n    }\n  };\n\n  // 좋아요 실행함수\n  const changeLike = (e) => {\n    // 이벤트 버블링,캡쳐링 방지\n    e.preventDefault();\n    e.stopPropagation();\n\n    // 로그인 없이 좋아요 기능 눌렀을때 알림과함께 로그인화면으로 보내기\n    if (!user) {\n      window.alert(\"로그인이 필요합니다.\");\n      history.push(\"/login\");\n      return;\n    }\n    // 좋아요 현재 상태값 갖고 좋아요 함수 실행\n    const is_like = props.is_like;\n    dispatch(postActions.toggleLikeDB(post_id, is_like));\n  };\n\n  // 댓글작성 실행함수\n  const addComment = () => {\n    // 로그인 없이 댓글 작성시 알림창 생성\n    if (!user) {\n      window.alert(\"로그인이 필요합니다.\");\n      return;\n    }\n\n    // 댓글 입력내용없이 작성버튼누를시 내용입력하라는 알림창 생성\n    if (!comment) {\n      window.alert(\"댓글 내용을 입력해주세요.\");\n      return;\n    }\n    dispatch(commentActions.addCommentDB(user.name, comment, post_id));\n    window.alert(\"댓글을 게시하였습니다.\");\n  };\n\n  return (\n    <React.Fragment>\n      <Wrapper>\n        {/* 유저 이름과 작성자 이름이 동일하면 수정/삭제 버튼 생성, 아니면 빈값 */}\n        {user.name === post.user ? (\n          <Topbutton>\n            <div style={{ marginRight: \"0.5rem\" }}>\n              <Button\n                onClick={() => {\n                  history.push(`/post/${post_id}/edit`);\n                }}\n              >\n                수정\n              </Button>\n            </div>\n            <div>\n              <Button onClick={deletePost}>삭제</Button>\n            </div>\n          </Topbutton>\n        ) : (\n          <></> // 빈 값 <React.Fragment>랑 같은 것\n        )}\n\n        <Grid padding=\"0px\">\n          <Text bold size=\"30px\">\n            {post.title}\n          </Text>\n          <InfoWrap>\n            <InfoBox>\n              <InfoText>{moment(post.createdAt).format(\"YYYY-MM-DD\")}</InfoText>\n              <span style={{ marginLeft: \"0.4rem\", marginRight: \"0.4rem\" }}>\n                ·\n              </span>\n              <InfoText>{post.user}</InfoText>\n              <span style={{ marginLeft: \"0.4rem\", marginRight: \"0.4rem\" }}>\n                ·\n              </span>\n              <InfoText>{post.category}</InfoText>\n            </InfoBox>\n            <LikeCommentBox>\n              <div\n                style={{\n                  display: \"flex\",\n                  lineHeight: \"1.5\",\n                  color: \"rgb(134, 142, 150)\",\n                  width: \"100%\",\n                  justifyContent: \"space-between\",\n                }}\n              >\n                <CommentButton />\n                {comment_list.length}\n              </div>\n              <div style={{ width: \"2rem\" }}></div>\n              <div\n                style={{\n                  display: \"flex\",\n                  lineHeight: \"1.5\",\n                  color: \"rgb(134, 142, 150)\",\n                  width: \"100%\",\n                  justifyContent: \"space-between\",\n                }}\n              >\n                <HeartButton _onClick={changeLike} />\n                {post.recommendCnt}\n              </div>\n            </LikeCommentBox>\n          </InfoWrap>\n        </Grid>\n        <Grid>\n          <Image detail src={post.img}></Image>\n        </Grid>\n        <Grid>\n          <ContentBox>{post.content}</ContentBox>\n        </Grid>\n        <Grid margin=\"1rem 0px 0px 0px\">\n          <CommentBox>\n            <div style={{ display: \"flex\", alignItems: \"center\" }}>\n              <Input\n                _onChange={(e) => {\n                  setComment(e.target.value);\n                }}\n                placeholder=\"댓글 내용을 입력하세요.\"\n              />\n              <CommentAddBtn onClick={addComment}>게시</CommentAddBtn>\n            </div>\n            <CommentListBox>\n              {/* 댓글이 있는 게시글이면 댓글 표시, 없으면 빈값 */}\n              {comment_list ? (\n                comment_list.map((p, idx) => {\n                  return <CommentPost key={p._id} {...p} />;\n                })\n              ) : (\n                <></>\n              )}\n            </CommentListBox>\n          </CommentBox>\n        </Grid>\n      </Wrapper>\n    </React.Fragment>\n  );\n};\n\nPostDetail.defaultProps = {\n  title:\n    \"제목이 들어갈 자리입니다. 그래서 아무도 제목말고는 볼 수 없어요. 진짜에요.\",\n  user: \"작성자\",\n  createdAt: \"2000-00-00\",\n  category: \"카테고리\",\n  commentCnt: 0,\n  recommendCnt: 0,\n  img:\n    \"https://cdn.crowdpic.net/list-thumb/thumb_l_1ED169F054035E14E5A306D7947BC544.jpg\",\n  content: \"내용이 들어가는 자리입니다.\",\n  comment_user: \"박민경\",\n  comment_content: \"이게 대체 뭔소리에요??\",\n  comment_createdAt: \"2021-04-13\",\n  is_like: false,\n};\n\nconst CommentListBox = styled.div`\n  margin-top: 1.5rem;\n`;\n\nconst Button = styled.button`\n  width: auto;\n  height: 35px;\n  margin: 0px;\n  border: 0px solid;\n  background-color: #ccd6f1;\n  border-radius: 10px;\n  font-weight: 700;\n  font-size: 1rem;\n  box-shadow: rgb(0 0 0 / 30%) 0px 1.5px 2.5px 0px;\n`;\n\nconst CommentAddBtn = styled.button`\n  width: 4.5rem;\n  margin-left: 0.5rem;\n  padding: 0.75rem 4px;\n  align-items: center;\n  border: 0px solid;\n  background-color: #ccd6f1;\n  border-radius: 10px;\n  font-weight: 700;\n  font-size: 1rem;\n  box-shadow: rgb(0 0 0 / 30%) 0px 1.5px 2.5px 0px;\n  @media all and (max-width: 414px) {\n    height: 2.4rem;\n    font-size: 0.8rem;\n    width: 3rem;\n  }\n  @media all and (max-width: 375px) {\n    height: 2.4rem;\n    font-size: 0.8rem;\n    width: 3rem;\n  }\n`;\n\nconst Wrapper = styled.div`\n  width: 50rem;\n  height: 100%;\n  margin-left: auto;\n  margin-right: auto;\n  margin-top: 6rem;\n  margin-bottom: 10rem;\n  padding: 100px;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  background: white;\n  border-radius: 4px;\n  box-shadow: rgb(0 0 0 / 30%) 0px 4px 16px 0px;\n  border-radius: 10px;\n  @media all and (min-width: 1024px) {\n    width: 50%;\n  }\n  @media all and (max-width: 768px) {\n    width: 60%;\n  }\n  @media all and (max-width: 414px) {\n    margin-top: 1rem;\n    width: 80%;\n    padding: 1rem;\n  }\n  @media all and (max-width: 375px) {\n    width: 80%;\n    padding: 1rem;\n    margin-top: 1rem;\n  }\n`;\n\nconst LikeCommentBox = styled.div`\n  border: none;\n  width: 6rem;\n  height: 100%;\n  background-color: white;\n  display: flex;\n  justify-content: space-between;\n`;\n\nconst ContentBox = styled.div`\n  overflow: scroll;\n  box-sizing: border-box;\n  border: 1px solid #dddddd;\n  width: 100%;\n  font-size: 1.3rem;\n  padding: 12px 4px;\n  height: 25rem;\n  padding: 2rem;\n  margin-top: 1rem;\n  @media all and (max-width: 1024px) {\n    height: 10rem;\n  }\n  @media all and (max-width: 414px) {\n    font-size: 0.7rem;\n  }\n  @media all and (max-width: 375px) {\n    font-size: 0.7rem;\n  }\n`;\n\nconst CommentBox = styled.div`\n  box-sizing: border-box;\n  border: 1px solid #dddddd;\n  width: 100%;\n  font-size: 1.3rem;\n  padding: 12px 4px;\n  height: 100%;\n  background-color: #f5f8ff;\n  padding: 2rem;\n  @media all and (max-width: 414px) {\n    font-size: 0.8rem;\n    padding: 0.7rem;\n  }\n  @media all and (max-width: 375px) {\n    font-size: 0.8rem;\n    padding: 0.7rem;\n  }\n`;\n\nconst InfoBox = styled.div`\n  font-size: 0.75rem;\n  line-height: 1.5;\n  color: rgb(134, 142, 150);\n`;\n\nconst InfoText = styled.span`\n  font-size: 1rem;\n  line-height: 1.5;\n  color: rgb(134, 142, 150);\n  @media all and (max-width: 414px) {\n    font-size: 0.7rem;\n  }\n  @media all and (max-width: 375px) {\n    font-size: 0.7rem;\n  }\n`;\n\nconst InfoWrap = styled.div`\n  margin: 0.7rem 0px;\n  display: flex;\n  box-sizing: border-box;\n  justify-content: space-between;\n`;\n\nconst Topbutton = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  margin: 0px 0px 0px 0px;\n\n  @media all and (max-width: 414px) {\n    & > div > button {\n      font-size: 0.5rem;\n      height: 2rem;\n    }\n  }\n\n  @media all and (max-width: 375px) {\n    & > div > button {\n      font-size: 0.5rem;\n      height: 2rem;\n    }\n  }\n`;\n\nexport default PostDetail;\n"]},"metadata":{},"sourceType":"module"}